{% extends 'base.html.twig' %}

{% block title %}MyWall - Muro
{% endblock %}

{% block body %}
	<div class="container mt-4">
		{% if app.user %}
			<h2 class="text-center mb-4">Hola,
				{{ app.user.username }}!</h2>

			<!-- Formulario para escribir una publicación -->
			<div class="card shadow-sm mb-4">
				<div class="card-body">
					<h5 class="card-title">Escribe tu publicación</h5>
					<form method="post" action="{{ path('app_publicar') }}">
						<div class="mb-3">
							<textarea class="form-control" name="contenido" rows="3" placeholder="¿Qué estás pensando?" required></textarea>
						</div>
						<button type="submit" class="btn btn-primary">Publicar</button>
					</form>
				</div>
			</div>

			<!-- Sección para mostrar publicaciones -->
			<div class="card shadow-sm">
				<div class="card-body">
					<h5 class="card-title">Publicaciones recientes</h5>
					{% for publicacion in publicaciones %}
						<div class="border-bottom pb-2 mb-2">
							<strong>{{ publicacion.usuario.username }}</strong>
							dijo:
							<p>{{ publicacion.contenido }}</p>
							<small class="text-muted">{{ publicacion.fechaCreacion|date('d/m/Y H:i') }}</small>
						</div>
					{% else %}
						<p class="text-muted">No hay publicaciones aún.</p>
					{% endfor %}
				</div>
			</div>

		{% else %}
			<script>
				window.location.href = "{{ path('app_login') }}";
			</script>
		{% endif %}
	</div>
{% endblock %}
