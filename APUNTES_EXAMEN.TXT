-- FUNCION CON RENDER

// RUTA

#[Route('/arbnb', name: 'app_arbnb')]

    // NOMBRE FUNCION

    public function index(): Response
    {
        // CUANDO ENTRE EN ESTA FUNCION TE DEVUELVE A UNA PAGINA, EN LOS PARAMETROS LE PASAS LO QUE QUIERAS

        return $this->render('arbnb/index.html.twig', ['titulo' => 'Bienvenido', 'ejemplo' => $datos]);
    }


--CREAR FORMULARIO

php bin/console make:form
--NOMBREFORM
--ENTIDAD A LA QUE SE RELACIONA

Request (Symfony\Component\HttpFoundation\Request)-> Recoge datos del formulario

EntityManagerInterface (Doctrine\ORM\EntityManagerInterface) -> 
$em->persist($datosEntidad)---$em->flush(); // sube los datos


// PASAMOS PARAMETROS NECESARIOS PARA MANEJAR LOS DATOS DEL FORMULARIO

public function misAlojamientos(Request $request, EntityManagerInterface $em): Response
    {
        // CREAMOS UN NUEVO OBJETO DE ESA ENTIDAD
        $alojamiento = new Alojamiento();
        // CREAMOS FORM, CON EL NOMBRE DEL MAKEFORM QUE HICIMOS MAS EL NUEVO ITEM
        $form = $this->createForm(FormAlojamientoType::class, $alojamiento);
        // MANEJAMOS LA RESPUESTA DEL FORMULARIO
        $form->handleRequest($request);

        // SI SE HA ENVIADO Y ES VALIDO
        if ($form->isSubmitted() && $form->isValid()) {
            //SEGUN LOS PARAMETROS DE LA ENTIDAD PODEMOS DEFINIR COSAS YA DE DEFAULT
            $alojamiento->setPropietario($this->getUser());
            //GUARDAMOS LA QUERY
            $em->persist($alojamiento);
            //LA ENVIAMOS
            $em->flush();
        }

// LE PASAMOS EL FORM PARA PODER PONER DIRECTAMENTE {{form}} Y QUE SALGA O
{{ form_start(form) }} {{ form_widget(form) }}{{ form_end(form) }} SI FALLARA

return $this->render('arbnb/misalojamientos.html.twig', [
    'titulo' => 'Mis alojamientos',
    'form' => $form,
]);


-- RECOGER DATOS DEL REPOSITOTY PARA PASARLO A LA PAGINA

#[Route('/arbnb/alquilar', name: 'app_alquilar')]
    // SE MANEJA CON EntityManagerInterface $em
    public function alquilar(EntityManagerInterface $em): Response
    {
        // LEEMOS TODAS LAS TABLAS DEL REPOSITORY Y LAS GUARDAMOS EN LA VARIABLE
        $casas = $em->getRepository(Alojamiento::class)->findAll();


        return $this->render('arbnb/alquilar.html.twig', [
            'titulo' => 'Alquilar',
            // LO PASAMOS AL HTML PARA TRABAJAR CON ELLAS
            'casas' => $casas,
        ]);
    }















